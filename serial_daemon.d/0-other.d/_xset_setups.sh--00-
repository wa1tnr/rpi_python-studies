#!/bin/sh

# github.com/raspberrypi/linux/issues/2517 xset

xset_setup () {
    xset -display :0 s blank
    xset -display :0 s on
    xset -display :0 s 90 90
    xset -display :0 dpms 90 90 90
    xsetroot -display :0 -solid black
    xset -display :0 s on
    xset -display :0 s 90 90
    sleep 8
    xset -display :0 q
    date > .semaphore_subr
}

# wake the screen:
date > .semaphore
xset s reset
sleep 8
xset_setup
sleep 2
xset s reset
